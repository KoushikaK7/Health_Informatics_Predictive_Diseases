<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Outbreak Prediction</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

    <!-- Custom styles for this template -->
    <link href="css/agency.min.css" rel="stylesheet">

  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">Outbreak Prediction</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fa fa-bars"></i>
        </button>
          <ul class="navbar-nav text-uppercase ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#services">GLOBAL ANALYSIS</a>
            </li>
			<li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#team">COUNTRY ANALYSIS</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#contact">CONTACT US</a>
            </li>
          </ul>
        </div>
    </nav>

    <!-- Header -->
    <header class="masthead">
      <div class="container">
        <div class="intro-text">
		<div class="intro-lead-in"></div>
        </div>
      </div>
    </header>

    <!-- Global Analysis -->
    <section id="services">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h2 class="section-heading text-uppercase">Global Analysis</h2>
			<h3 class="section-subheading text-muted"></h3>
          </div>
        </div>
		<style>
		
		 #dropdown1 {
			text-align: center;
			display: flex;
			justify-content: center;
			align-items: center;
		}
		#menu3 {
			font-size: 15px;
			font-weight: 700;
			font-family: Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif;
			}
			
		label1,
		select {
			margin-right: 20px; /* Add space between the dropdown menus */
			margin-left: 20px;
			margin-top: 20px;
			margin-bottom: 20px;
			font-size: 20px; /* Adjust font size as needed */
			font-weight: 700;
			font-family: Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif;
		}

		#result1 {
			margin-left: 20px;
			margin-top: 50px;
			margin-bottom: 20px;
			margin-right: 20px;
			text-align: center;
			display: flex;
			justify-content: center;
			align-items: center;
		}
		
.image-container {
        max-width: 100%; /* Set maximum width for the container */
        margin: 0 auto; /* Center the container horizontally */
        overflow-x: auto; /* Enable horizontal scrolling if images exceed container width */
    }

    .image {
        width: 1000px; /* Set image width */
        height: auto; /* Maintain aspect ratio */
        display: block; /* Ensure images display as blocks */
        margin: 10px auto; /* Center the image horizontally */
    }
	
	</style>
	<div id="dropdown1">
<label for="menu3">Disease:</label>
        <select id="menu3">
            <option value="choice4">COVID-19</option>
            <option value="choice5">Diabetes</option>
            
        </select> </div>
        <div id="result1"></div>
<script>
    // Add event listener to the dropdown
    document.getElementById("menu3").addEventListener("change", loadImages);

    function loadImages() {
        var dropdown = document.getElementById("menu3");
        var selectedDisease = dropdown.value;
        
        // Log the selected choice to the console
        console.log("Selected Disease:", selectedDisease);

        // Path to the directory containing images for each disease
        var imagePath = "../backend/figures/" + selectedDisease + "/";

        // Clear previous images
        document.getElementById("result1").innerHTML = "";

        // Fetch images from the directory and display them
        fetch(imagePath)
            .then(response => response.text())
            .then(text => {
                // Parse HTML response to extract image filenames
                var parser = new DOMParser();
                var htmlDoc = parser.parseFromString(text, 'text/html');
                var images = htmlDoc.querySelectorAll('a');

                // Create a container for the images
                var imageContainer = document.createElement("div");
                imageContainer.className = "image-container";

                // Display images one by one in separate rows
                images.forEach((image) => {
                    var imageURL = imagePath + image.getAttribute('href');
                    if (imageURL.match(/\.(jpe?g|png|gif)$/)) {
                        var img = document.createElement("img");
                        img.src = imageURL;
                        img.className = "image";
                        imageContainer.appendChild(img);

                        // Add a line break after each image
                        imageContainer.appendChild(document.createElement("br"));
                    }
                });

                // Append the container to the result container
                document.getElementById("result1").appendChild(imageContainer);
            })
            .catch(error => console.error('Error loading images:', error));
    }
	loadImages();
</script>
		</div>
		</section>

    <!-- Country Analysis -->
    <section class="bg-light" id="team">
      <div class="container">
        <div class="row"><div class="col-lg-12 text-center">
            <h2 class="section-heading text-uppercase">Country Analysis</h2>
            <h3 class="section-subheading text-muted"></h3>
          </div>
        </div>
		<style>
		
    #dropdown {
        text-align: center;
		display: flex;
        justify-content: center;
        align-items: center;
    }
	#menu1,
    #menu2 {
		font-size: 15px;
		font-weight: 700;
		font-family: Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif;
		}
		
	label,
    select {
		margin-right: 20px; /* Add space between the dropdown menus */
		margin-left: 20px;
        margin-top: 20px;
		margin-bottom: 20px;
        font-size: 18px; /* Adjust font size as needed */
		font-weight: 700;
		font-family: Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif;
    }

    #result {
		margin-left: 20px;
        margin-top: 50px;
		margin-bottom: 20px;
		margin-right: 20px;
		text-align: center;
		display: flex;
        justify-content: center;
        align-items: center;
    }
	
	/* Center the submit button */
        #submitButton {
            display: block;
            margin: auto;
        }
		
		</style>
<form id="dataForm">
    <!-- Disease Dropdown -->
    <label for="disease">Select a Disease:</label>
    <select id="disease" name="disease" onchange="updateDropdowns()">
        <option value="">Select</option>
        <option value="COVID">COVID-19</option>
        <option value="Diabetes">Diabetes</option>
        <!-- Add more diseases as needed -->
    </select>

    <!-- State Dropdown (Initially hidden) -->
    <div id="stateDropdown" style="display: none;">
        <label for="state">Select a State:</label>
        <select id="state" name="state" onchange="updateCountyDropdown()">
            <option value="">Select</option>
            <!-- State options will be added dynamically using JavaScript -->
        </select>
    </div>

    <!-- County Dropdown (Initially hidden) -->
    <div id="countyDropdown" style="display: none;">
        <label for="county">Select a County:</label>
        <select id="county" name="county">
            <option value="">Select</option>
            <!-- County options will be added dynamically using JavaScript -->
        </select>
    </div>

    <!-- Submit Button (Initially hidden) -->
    <button type="submit" id="submitButton" style="display: none;">Submit</button>
</form>

<div id="imageContainer"></div>

<script>
    // Function to fetch CSV file and parse data
    async function fetchAndParseCSV() {
        const response = await fetch('country-state-county.csv');
        const data = await response.text();
        return parseCSV(data);
    }

    // Function to parse CSV data
    function parseCSV(csv) {
        const lines = csv.split('\n');
        const data = [];
        for (let i = 1; i < lines.length; i++) {
            const [county, state, country] = lines[i].split(',');
            data.push({ county, state, country });
        }
        return data;
    }

    // Function to update dropdowns based on disease selection
    async function updateDropdowns() {
        const diseaseDropdown = document.getElementById("disease");
        const stateDropdown = document.getElementById("state");
        const stateDropdownContainer = document.getElementById("stateDropdown");
        const countyDropdownContainer = document.getElementById("countyDropdown");
        const submitButton = document.getElementById("submitButton");

        // Reset state and county dropdowns
        stateDropdown.innerHTML = "<option value=''>Select</option>";
        stateDropdownContainer.style.display = "none";
        countyDropdownContainer.style.display = "none";
        submitButton.style.display = "none";

        // Show state dropdown if disease is COVID
        if (diseaseDropdown.value === "COVID" || diseaseDropdown.value === "Diabetes") {
            stateDropdownContainer.style.display = "block";
            const data = await fetchAndParseCSV();
            const states = [...new Set(data.map(item => item.state))];
            for (const state of states) {
                stateDropdown.add(new Option(state, state));
            }
        } else if (diseaseDropdown.value === "HIV") {
            // Show state dropdown alone if disease is HIV
            stateDropdownContainer.style.display = "block";
            // Show submit button after state selection for HIV
            submitButton.style.display = "block";
        }
    }

    // Function to update county dropdown based on state selection
    async function updateCountyDropdown() {
        const diseaseDropdown = document.getElementById("disease");
        const stateDropdown = document.getElementById("state");
        const countyDropdown = document.getElementById("county");
        const countyDropdownContainer = document.getElementById("countyDropdown");
        const submitButton = document.getElementById("submitButton");

        // Reset county dropdown
        countyDropdown.innerHTML = "<option value=''>Select</option>";
        countyDropdownContainer.style.display = "none";
        submitButton.style.display = "none";

        // Show county dropdown if disease is COVID and a state is selected
        if (stateDropdown.value) {
            countyDropdownContainer.style.display = "block";
            const data = await fetchAndParseCSV();
            const counties = data.filter(item => item.state === stateDropdown.value).map(item => item.county);
            for (const county of counties) {
                countyDropdown.add(new Option(county, county));
            }
            // Show submit button after county selection
            submitButton.style.display = "block";
        }
    }

    // Add event listener to the form for submission
    document.getElementById("dataForm").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent default form submission
        // Call function to send data to FastAPI backend
        sendData();
    });

    // Function to send data to FastAPI backend
    function sendData() {
        const formData = new FormData(document.getElementById("dataForm"));
        const jsonData = {};

        // Convert form data to JSON format
        for (const [key, value] of formData.entries()) {
            jsonData[key] = value;
        }

        // Send JSON data to FastAPI backend
        fetch("http://localhost:5000/generate", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(jsonData)
        })
        .then(response => {
            if (!response.ok) {
                throw new Error("Network response was not ok");
            }
            return response.json();
        })
        .then(data => {
            console.log("Data sent successfully:", data);
			// Construct full URLs for images
			const baseBackendURL = "http://localhost:5000/"; // Change this to match your backend URL
			console.log("Image URL:", data.image_urls);
			const fullImageUrls = data.image_urls.map(url => baseBackendURL + url.substring(3)); // Remove "../" from the relative paths
			// Display images
			console.log("Full Image URL:", fullImageUrls);
			displayImages(fullImageUrls);
        })
        .catch(error => {
            console.error("Error sending data:", error);
            // Optionally, handle error here
        });
		
	// Function to replace existing images with new ones
		function displayImages(imageUrls) {
			const imageContainer = document.getElementById("imageContainer");
			// Clear existing images
			imageContainer.innerHTML = "";
			// Display new images
			imageUrls.forEach((imageUrl, index) => {
				console.log(`Image URL ${index + 1}:`, imageUrl); // Log each image URL
				const img = document.createElement("img");
				img.src = imageUrl;
				img.style.width = "1000px"; // Set image width as needed
				img.style.margin = "5px"; // Add margin between images
				imageContainer.appendChild(img);
			});
		}
	}
</script>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h2 class="section-heading text-uppercase">Contact Us</h2>
            <h3 class="section-subheading text-muted"></h3>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12">
            <form align="middle">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <input class="form-control" name="name" id="name" type="text" placeholder="Your Name *" required="required" data-validation-required-message="Please enter your name.">
                    <p class="help-block text-danger"></p>
                  </div>
                  <div class="form-group">
                    <input class="form-control" name="email" id="email" type="email" placeholder="Your Email *" required="required" data-validation-required-message="Please enter your email address.">
                    <p class="help-block text-danger"></p>
                  </div>
                  <div class="form-group">
                    <input class="form-control" name="phone" id="phone" type="tel" placeholder="Your Phone *" required="required" data-validation-required-message="Please enter your phone number.">
                    <p class="help-block text-danger"></p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <textarea class="form-control" name="message" id="message" placeholder="Your Message *" required="required" data-validation-required-message="Please enter a message."></textarea>
                    <p class="help-block text-danger"></p>
                  </div>
                </div>
                <div class="clearfix"></div>
                <div class="col-lg-12 text-center">
                  <div></div>
                  <input  type="submit">Send Message</input>

				</div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <span class="copyright">Copyright &copy; koushika 2024</span>
          </div>
          <div class="col-md-4">
            <ul class="list-inline social-buttons">
              <li class="list-inline-item">
                <a href="#">
                  <i class="fa fa-twitter"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#">
                  <i class="fa fa-facebook"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#">
                  <i class="fa fa-linkedin"></i>
                </a>
              </li>
            </ul>
          </div>
          <div class="col-md-4">
            <ul class="list-inline quicklinks">
              <li class="list-inline-item">
                <a href="#">Privacy Policy</a>
              </li>
              <li class="list-inline-item">
                <a href="#">Terms of Use</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>

    <!-- Portfolio Modals -->

    <!-- Modal 1 -->
    <div class="portfolio-modal modal fade" id="portfolioModal1" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <h2 class="text-uppercase">Project Name</h2>
                  <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/01-full.jpg" alt="">
                  <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae, nostrum, reiciendis facere nemo!</p>
                  <ul class="list-inline">
                    <li>Date: January 2017</li>
                    <li>Client: Threads</li>
                    <li>Category: Illustration</li>
                  </ul>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                    <i class="fa fa-times"></i>
                    Close Project</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal 2 -->
    <div class="portfolio-modal modal fade" id="portfolioModal2" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <h2 class="text-uppercase">Project Name</h2>
                  <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/02-full.jpg" alt="">
                  <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae, nostrum, reiciendis facere nemo!</p>
                  <ul class="list-inline">
                    <li>Date: January 2017</li>
                    <li>Client: Explore</li>
                    <li>Category: Graphic Design</li>
                  </ul>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                    <i class="fa fa-times"></i>
                    Close Project</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal 3 -->
    <div class="portfolio-modal modal fade" id="portfolioModal3" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <h2 class="text-uppercase">Project Name</h2>
                  <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/03-full.jpg" alt="">
                  <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae, nostrum, reiciendis facere nemo!</p>
                  <ul class="list-inline">
                    <li>Date: January 2017</li>
                    <li>Client: Finish</li>
                    <li>Category: Identity</li>
                  </ul>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                    <i class="fa fa-times"></i>
                    Close Project</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal 4 -->
    <div class="portfolio-modal modal fade" id="portfolioModal4" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <h2 class="text-uppercase">Project Name</h2>
                  <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/04-full.jpg" alt="">
                  <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae, nostrum, reiciendis facere nemo!</p>
                  <ul class="list-inline">
                    <li>Date: January 2017</li>
                    <li>Client: Lines</li>
                    <li>Category: Branding</li>
                  </ul>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                    <i class="fa fa-times"></i>
                    Close Project</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal 5 -->
    <div class="portfolio-modal modal fade" id="portfolioModal5" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <h2 class="text-uppercase">Project Name</h2>
                  <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/05-full.jpg" alt="">
                  <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae, nostrum, reiciendis facere nemo!</p>
                  <ul class="list-inline">
                    <li>Date: January 2017</li>
                    <li>Client: Southwest</li>
                    <li>Category: Website Design</li>
                  </ul>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                    <i class="fa fa-times"></i>
                    Close Project</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal 6 -->
    <div class="portfolio-modal modal fade" id="portfolioModal6" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="close-modal" data-dismiss="modal">
            <div class="lr">
              <div class="rl"></div>
            </div>
          </div>
          <div class="container">
            <div class="row">
              <div class="col-lg-8 mx-auto">
                <div class="modal-body">
                  <!-- Project Details Go Here -->
                  <h2 class="text-uppercase">Project Name</h2>
                  <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                  <img class="img-fluid d-block mx-auto" src="img/portfolio/06-full.jpg" alt="">
                  <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae, nostrum, reiciendis facere nemo!</p>
                  <ul class="list-inline">
                    <li>Date: January 2017</li>
                    <li>Client: Window</li>
                    <li>Category: Photography</li>
                  </ul>
                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                  <i class="fa fa-times"></i>
                    Close Project</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Contact form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/agency.min.js"></script>

  </body>

</html>
